<!DOCTYPE html>
<html lang="en">

    <head>
        <!-- Standard Meta -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

        <meta name="description" content="This is a mini tool to generate SECRET_KEY for Django based projects.">
        <meta name="author" description="Majid Rouhi">

        <title>Djecrety | Django Secret Key Generator</title>

        <!-- Site Properties -->
        <link rel="stylesheet" type="text/css" href="assets/vendor/semantic-ui/semantic.min.css">

        <link rel="stylesheet" type="text/css" href="assets/vendor/semantic-ui/components/reset.min.css">
        <link rel="stylesheet" type="text/css" href="assets/vendor/semantic-ui/components/site.min.css">

        <link rel="stylesheet" type="text/css" href="assets/vendor/semantic-ui/components/container.min.css">
        <link rel="stylesheet" type="text/css" href="assets/vendor/semantic-ui/components/modal.min.css">
        <link rel="stylesheet" type="text/css" href="assets/vendor/semantic-ui/components/divider.min.css">
        <link rel="stylesheet" type="text/css" href="assets/vendor/semantic-ui/components/grid.min.css">
        <link rel="stylesheet" type="text/css" href="assets/vendor/semantic-ui/components/header.min.css">
        <link rel="stylesheet" type="text/css" href="assets/vendor/semantic-ui/components/button.min.css">
        <link rel="stylesheet" type="text/css" href="assets/vendor/semantic-ui/components/icon.min.css">
        <link rel="stylesheet" type="text/css" href="assets/vendor/semantic-ui/components/transition.min.css">

        <style type="text/css">
            @font-face {
                font-family: 'Lalehzar';
                src: url('assets/fonts/lalehzar/Lalehzar-Regular.ttf'),
                url('assets/fonts/lalehzar/Lalehzar-Regular.ttf') format('truetype')
            }

            body {
                background-color: #1b1c1d;
            }

            h1.ui.header {
                font-family: Lalehzar, sans-serif;
            }

            .ui.action.input:not([class*="left action"])>input:focus {
                border-color: transparent !important;
            }

            .masthead.segment {
                min-height: 75%;
                padding: 1em 0;
            }

            .masthead .logo.item img {
                margin-right: 1em;
            }

            .masthead h1.ui.header {
                margin-top: 2em;
                margin-bottom: 0;
                font-size: 4em;
                font-weight: normal;
            }

            .masthead h2 {
                font-size: 1.7em;
                font-weight: normal;
            }

            .ui.vertical.stripe h3 {
                font-size: 2em;
            }

            .ui.vertical.stripe .button+h3,
            .ui.vertical.stripe p+h3 {
                margin-top: 3em;
            }

            .ui.vertical.stripe p {
                font-size: 1.33em;
            }

            .footer.segment {
                padding: 4em 0 0.5em;
            }

            @media only screen and (max-width: 823px) {

                .masthead h1.ui.header {
                    font-size: 2em;
                    margin-top: 1em;
                }

                .masthead h2 {
                    margin-top: 0.5em;
                    font-size: 1.5em;
                }
            }

            @media only screen and (max-width: 414px) {

                .masthead h1.ui.header {
                    font-size: 2em;
                    margin-top: 5em;
                }

                .masthead h2 {
                    margin-top: 0.5em;
                    font-size: 1.5em;
                }
            }

        </style>
    </head>

    <body>
        <!-- Page Contents -->
        <div class="ui inverted vertical masthead center aligned segment">
            <div class="ui text container">
                <h1 class="ui inverted header">Djecrety</h1>
                <h4>Come on! Don't say that you don't change secret key on deploy?!</h4>
                <div class="ui fluid large action left icon input">
                    <i class="key icon"></i>
                    <input id="secretKey" type="text" class="clipboard" style="cursor: pointer" data-clipboard-target="#secretKey" placeholder="Secret Key..."
                        readonly>
                    <button id="generateSecretKey" class="ui button primary clipboard" onclick="generateSecretKey()">Generate
                    </button>
                </div>
            </div>
        </div>

        <!-- Page Footer -->
        <div class="ui inverted vertical footer segment cen">
            <div class="ui container">
                <div class="ui stackable inverted divided equal height stackable grid">
                    <div class="ui four column centered grid">
                        <h4 class="ui inverted header">About</h4>
                        <p class="ui inverted centered">This is a mini tool to generate SECRET_KEY for
                            <a href="https://www.djangoproject.com/" target="_blank">Django</a> based projects.</p>
                        <div class="ui inverted link list horizontal">
                            <a href="#" class="item" id="why">Why?</a>
                            <a href="#" class="item" id="documents">Documents</a>
                            <a href="#" class="item" id="donate">Donate and Support</a>
                            <div class="ui fluid popup top left transition hidden">
                                <div class="ui two column divided center aligned grid">
                                    <div class="column">
                                        <h4 class="ui header">Bitcoin</h4>
                                        <img src="assets/images/bitcoin-wallet-qr.png" class="ui centered tiny image" alt="bitcoin">
                                        <div class="ui hidden divider"></div>
                                        <div id="bitcoinAddress" class="ui button">Copy</div>
                                    </div>
                                    <div class="column">
                                        <h4 class="ui header">Ethereum</h4>
                                        <img src="assets/images/ethereum-wallet-qr.png" class="ui centered tiny image" alt="ethereum">
                                        <div class="ui hidden divider"></div>
                                        <div id="ethereumAddress" class="ui button">Copy</div>
                                    </div>
                                </div>
                                <div class="ui column divided center aligned grid">
                                    <div class="column">
                                        <div class="ui horizontal divider">Or</div>
                                        <p>Just an encouraging email :)</p>
                                        <a href="mailto:mrouhi13@icloud.com" class="ui button">Email Me</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Why Modal -->
        <div class="ui tiny modal" id="whyModal">
            <div class="header">
                Why we must change secret key?
            </div>
            <div class="image content">
                <div class="description scrolling content">
                    <p>As
                        <a href="https://docs.djangoproject.com/en/2.1/ref/settings/#std:setting-SECRET_KEY">Django official documentation</a>
                        says:</p>
                    <q style="padding-left: 20px; font-style: italic;">A secret key used to provide cryptographic signing, and should be set to a
                        <br>unique, unpredictable value.
                    </q>
                    <br>
                    <br>
                    <q style="padding-left: 20px; font-style: italic;">Running Django with a known SECRET_KEY defeats many of Djangoâ€™s security
                        <br>protections, and can lead to privilege escalation and remote code execution
                        <br>vulnerabilities.
                    </q>
                    <br>
                    <br>
                    <p>So it's
                        <strong>recommended</strong>: Ignore settings.py file in your commits, change the
                        <br>secret key on your deploy. If you lost the secret key for any reason or the server
                        <br>got compromised change it as soon as possible.</p>
                </div>
            </div>
            <div class="actions">
                <div class="ui positive right labeled icon button">
                    Got It!
                    <i class="checkmark icon"></i>
                </div>
            </div>
        </div>

        <!-- Documents Modal -->
        <div class="ui tiny modal" id="documentsModal">
            <div class="header">
                How to use?
            </div>
            <div class="image content">
                <div class="description">
                    <p>After create your project:</p>
                    <br>
                    <p style="padding-left: 20px">1. Duplicate your project 'settings.py' file and rename it to 'settings.py.sample'.</p>
                    <p style="padding-left: 20px">2. Open 'settings.py.sample' file and set empty SECRET_KEY value (line 23).
                        <br>
                        <pre style="padding-left: 50px">SECERET_KEY = ''</pre>
                    </p>
                    <p style="padding-left: 20px">3. Add 'settings.py' file to '.gitignore' file. (If git used)</p>
                    <p style="padding-left: 20px">4. When you want to deploy your project on server (production or test),
                        <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duplicate 'settings.py.sample' file.</p>
                    <p style="padding-left: 20px">5. Rename duplicated file to 'settings.py'.</p>
                    <p style="padding-left: 20px">6. Generate a new secret key and set SECRET_KEY value
                        <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to the new secret key in 'settings.py' file.</p>
                </div>
            </div>
            <div class="actions">
                <div class="ui positive right labeled icon button">
                    Got It!
                    <i class="checkmark icon"></i>
                </div>
            </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
        <script src="assets/vendor/semantic-ui/semantic.min.js"></script>
        <script>
            let input = $('#secretKey');
            let button = $('#generateSecretKey');
            let why = $('#why');
            let documents = $('#documents');
            let donate = $('#donate');
            let copyBitcoin = $('#bitcoinAddress');
            let copyEthereum = $('#ethereumAddress');
            let possible = 'abcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*(-_=+)';
            let popupStack = {
                position: 'left center',
                target: '.icon.input',
                on: 'click',
                title: 'Click on Generate!',
                content: '',
                transition: 'pulse',
                duration: '200',
                hoverable: true,
                exclusive: true,
            };

            why.click(function () {
                $('#whyModal').modal('show').modal({
                    transition: 'pulse',
                    closable: true
                });
            });

            documents.click(function () {
                $('#documentsModal').modal('show').modal({
                    transition: 'pulse',
                    closable: true
                });
            });

            donate.popup({
                target: '#donate',
                on: 'click',
                transition: 'pulse',
                duration: '200',
                hoverable: true,
                exclusive: true,
                preserve: true,
            });

            input.popup(popupStack);
            button.popup({
                position: 'left center',
                target: '.icon.input',
                on: 'click',
                title: 'Copied!',
                content: 'Just paste it to settings.',
                transition: 'pulse',
                duration: '200',
                hoverable: true,
                exclusive: true,
            });

            $('h1.header').transition('pulse');

            function generateSecretKey() {
                let newSecretKey = '';

                button.addClass('loading');

                for (let i = 0; i < 50; i++)
                    newSecretKey += possible.charAt(Math.floor(Math.random() * possible.length));

                popupStack.title = 'Copied!';
                popupStack.content = 'Just paste it to settings.';

                input.val(newSecretKey);
                input.popup(popupStack);

                setTimeout(function () {
                    new ClipboardJS('.clipboard', {
                        text: function () {
                            return newSecretKey;
                        }
                    });

                    button.removeClass('loading');
                }, 200);
            }

            // Copy new secret key to clipboard
            new ClipboardJS('.clipboard');

            // Copy Bitcoin wallet address to clipboard
            let bitcoinCp = new ClipboardJS('#bitcoinAddress', {
                text: function () {
                    return '1AmdLAaG9YtnMb51n5jCZZ1jV58cNEL7is';
                }
            });

            bitcoinCp.on('success', function (e) {
                copyBitcoin.html('Copied!');
                copyBitcoin.addClass('positive');

                setTimeout(function () {
                    copyBitcoin.html('Copy');
                    copyBitcoin.removeClass('positive');
                }, 1500);

                e.clearSelection();
            });

            // Copy Ethereum wallet address to clipboard
            let ethereumCp = new ClipboardJS('#ethereumAddress', {
                text: function () {
                    return '0x76fB3d644A937849d7b660BeDf0558C5e1d85230';
                }
            });

            ethereumCp.on('success', function (e) {
                copyEthereum.html('Copied!');
                copyEthereum.addClass('positive');

                setTimeout(function () {
                    copyEthereum.html('Copy');
                    copyEthereum.removeClass('positive');
                }, 1500);

                e.clearSelection();
            });
        </script>

    </body>

</html>
